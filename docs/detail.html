{{#> main pageTitle=example.title additionalCSS="/src/styles/detail.css"}}

<main>
  <div class="detail-header">
    <div class="detail-header-content">
      <a href="../gallery.html" class="back-button">â† Back to Gallery</a>
      <h1 class="detail-title">{{example.title}}</h1>
      <div></div>
    </div>
  </div>

  <div class="detail-container">
    <div class="example-header">
      <h1 class="example-title">{{example.title}}</h1>
      <p class="example-description">{{example.description}}</p>
    </div>

    <div class="content-grid">
      <div class="result-panel">
        <div class="panel-header">ğŸ“± Rendered Result</div>
        <div class="panel-content">
          <img
            src="{{example.svgPath}}"
            alt="{{example.title}} Result"
            class="result-image"
          />
        </div>
      </div>

      <div class="code-panel">
        <div class="panel-header">
          ğŸ“„ Source Code
          <span class="file-name">{{example.fileName}}</span>
        </div>
        <div class="panel-content">{{{example.highlightedCode}}}</div>
      </div>
    </div>

    <div class="example-actions">
      <a href="../gallery.html" class="button secondary"
        >â† Back to Gallery</a
      >
      <button onclick="copyToClipboard()" class="button primary">
        ğŸ“‹ Copy Code
      </button>
    </div>
  </div>
</main>

<script>
  function copyToClipboard() {
    // Get the source code from the example data
    const codeElement = document.querySelector(
      ".panel-content pre code, .panel-content code"
    );
    const text = codeElement.textContent || codeElement.innerText;

    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(text).then(() => {
        const button = document.querySelector(".button.primary");
        const originalText = button.textContent;
        button.textContent = "âœ… Copied!";
        button.style.background = "#28a745";
        setTimeout(() => {
          button.textContent = originalText;
          button.style.background = "";
        }, 2000);
      });
    } else {
      // Fallback for older browsers
      const textArea = document.createElement("textarea");
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand("copy");
      document.body.removeChild(textArea);

      const button = document.querySelector(".button.primary");
      const originalText = button.textContent;
      button.textContent = "âœ… Copied!";
      setTimeout(() => {
        button.textContent = originalText;
      }, 2000);
    }
  }
</script>

{{/main}}
